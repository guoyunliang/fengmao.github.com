<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<title>Linux 串口(serial port) - xanpeng</title>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
	</head>

	<body>
		<div id="wrapper">
			<div id="content">
				<h2>Linux 串口(serial port)</h2>
				<div class="cnt">
					<p>串口，又称串行接口或串行通信结构，是指数据一位位地顺序传送，其特点是通信线路简单，但是速度较慢。</p>

<p>接触到串口是因为kernel crash时，putty无法体现server的响应，此时可以通过串口将日志信息发往其他机器。</p>

<p>与记录内核故障信息相关的程序有<a href="http://www.cyberciti.biz/tips/connect-soekris-single-board-computer-using-minicom.html">minicom</a>，如果你的机器遵循<a href="http://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface">IPMI</a>(Intelligent Platform Management Interface)协议，则还可使用<a href="http://ipmitool.sourceforge.net/">ipmitool</a>来做crash信息收集。</p>

<p>IPMI是在服务器之上有一直连的BMC(Baseboard management controller)设备，猜测BMC包含一个极其精简的kernel，可以访问服务器的硬件设备。</p>

<p>我希望全面记录kernel故障信息，使用ipmitool时，执行如下步骤：<br/>
1、重定向串口。不同的OS处理方式是不同的，可搜查官方文档。<br/>
2、在远端机器上执行命令：</p>

<pre><code># ipmitool –I lanplus –H &lt;BMC_IP&gt; -U &lt;usrname&gt; –P &lt;passwd&gt; sol activate
</code></pre>

<p>其中sol是“serial over lan”的缩写。</p>

<p><em>希望从本文始，我能“理论+实践”，慢慢的掌握kernel panic分析的方法。</em></p>

<p><strong>参考资料</strong><br/>
- <a href="http://www.ibm.com/developerworks/cn/linux/l-serials/">Linux 下串口编程入门</a><br/>
- <a href="http://www.easysw.com/~mike/serial/serial.html#2_1">Serial Programming Guide for POSIX Operating Systems</a></p>

					--EOF--
				</div>
				<div id="disqus_thread"></div>
				<script type="text/javascript">
				  (function() {
				   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				   dsq.src = 'http://xanpeng.disqus.com/embed.js';
				   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
				  })();
				</script>
				<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=lzyyblog">comments powered by Disqus.</a></noscript>
			</div>
	</body>
</html>

