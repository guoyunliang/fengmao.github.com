---
title: 用Doxygen+Graphviz生成函数调用图
layout: post
tags: doxygen graphviz call graph function
category: coding
---

*本文不是step-by-step的教程, 而是挂羊头卖狗肉的吐槽.*

先说正事.  
使用Doxygen+Graphviz可以生成工程内部的调用关系图, google一下可以看到很多这方面的资料, 比如这篇"[用Doxygen+Graphviz生成函数调用流程图](http://wildpointer.net/2012/04/14/doxygen_graphviz/)", 再比如陈硕的"[分析函数调用关系图(call graph)的几种方法](http://blog.csdn.net/solstice/article/details/488865)"更是高屋建瓴地概述了这个领域.  
所以, 本文不会重复别人做过的, 实际上操作GUI十分直白, 你甚至可以不需要教程.

本文要吐槽的是: 编程领域少有科学, 多有细节, 我们没必要浪费太多的脑子去揣测各种细节和意图.

"计算机科学与技术"是一个大学专业名, 但是"计算机并不是科学"的说法一定不会让你觉得陌生. 在我看来, 大抵如是, 我据有限经验, 大胆妄言之, 言语表达或有差异, 但本文旨在抒怀, 不求精准:  
- 计算机中, 能称得上科学的, 可划归数学, 物理等(*知识不足, 不例证*).  
- 剩下的都是事实和约定. 比如, Linux内核某个子系统是这么实现的, 子系统之间的交互是这么实现的, 都只是既定事实而已. 比如, 我们要开发一个CS结构的系统, C和S之间如何交流, 我们做出一个约定.

我要强调的是第二点: 事实和约定.  
其实, 我们平时可以感觉到, 编程(*在本文的很多context中, 我把计算机和编程等同对待了*)世界是现实世界的模仿者, 比如tcp协议的中的handshake, 生活气息多重啊!  

对于约定, 我们没必要去说: "我要去研究某个协议", *这么说好像惹人不满, 我自己也不满了, 因为tcp是一个协议, 也是值得去研究的*, 所以更好的做法是, 我们没必要花很多时间去学习一个特定的, 使用不广泛的协议. 如果工作中需要, 最好就是能找到现成的资料, 用以参考即可.  
而对于tcp这样重量级的协议, 应用面广, 支撑着整个网络的运行, 非同小可, 很多细节都是值得挖掘的, 就另当别论吧.

对于事实, Linux内核的既有实现是事实, 学习它, 我们最好参考优秀的资料, 节省去了解它的时间, 完全靠自己读代码是低效的, 耗时不讨好, 且读代码的最终目的也无非是了解已成事实的实现机制而已.  
当然, 学习Linux有很多好处, 它帮你了解设计一个OS所需要考虑的方方面面, 从它可以领略诸多编程思想和技巧, 它应用面广, 是很多应用的基础, 熟悉它能为你带来收益.  
相对的, 如果对于一些开源的使用不广小项目, 我们就更加没必要去花费很多时间去深入了解其细节了, 那样子就相当于你在费力地揣测作者的意图, 花很多时间并不能让你受益很大. 所以, 最好是作者直接告诉你意图.

对于事实, 还有重要的一点, 值得学习的一点, 便是现有算法. 这是事实的精髓之一, 事实的精髓的另外一部分是优秀的实践, 如Linux, tcp. 所以, 很值得学习算法. 而且有了算法累积, 你可以修改组合"制造"新算法.

总结:  
对于"吊丝"(*应用不广, 小众, 不经典, 尤其是某些蹩脚的人的蹩脚之作时*)事实和约定, 我们不必花费太多时间于其上.  
对于"高帅富"(*应用广, 大众, 经典, 高手之作等*)事实和约定, 我们还是值得花些时间去学习的, 但最好不要一切从头来, 不要一切单靠自己, 尤其不要十分小白地打开第一个文件, 从第一行开始阅读. 最好是参考已有的资料, 缩短自己探索的时间.  
Linux内核, 数据结构和算法, tcp等都属于"高帅富"事实和约定, 近年火爆的hadoop也是"高帅富", 这些都值得花时间学习的. *实际上, 熟悉Linux内核那一套之后, 再看很多其他所谓"新"技术不过信手拈来.*  

而对于其余的"吊丝"作品, 尽量敬而远之吧, 如果工作中确实需要, 那么找资料, 使用Doxygen+Graphviz制造资料, 以节省时间吧.